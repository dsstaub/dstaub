<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>D Staub • Resumé</title>

  <!-- Meta + Icons -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png" />
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Fonts + Tailwind + Custom CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <script src="/layout.js" defer></script>
  <script src="/app.js" defer></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>
<body class="bg-slate-200 dark:bg-zinc-900 text-zinc-800 dark:text-white font-sans leading-relaxed px-6 pb-[7rem] max-w-4xl mx-auto">
  <main class="mt-12 space-y-6">

    <!-- Professional Summary Card -->
    <section class="glass bg-red-100 dark:bg-red-950 p-6">
      <h2 id="summaryTitle" class="text-xl font-semibold text-red-400 mb-3"></h2>
      <p id="summaryText" class="text-gray-900 dark:text-gray-200"></p>
    </section>

    <!-- Relevant Experience Card -->
    <section id="experienceSection" class="glass bg-green-100 dark:bg-green-950 p-6">
      <h2 class="text-xl font-semibold text-green-400 mb-3">Relevant Experience</h2>
      <div id="experienceList" class="space-y-4"></div>
    </section>

    <!-- Education Card -->
    <section id="educationSection" class="glass bg-blue-100 dark:bg-blue-950 p-6">
      <h2 id="educationTitle" class="text-xl font-semibold text-sky-400 mb-3"></h2>
      <ul id="educationList" class="list-disc pl-6 mt-2 space-y-2"></ul>
    </section>

    <!-- Skills Card -->
    <section id="skillsSection" class="glass bg-yellow-100 dark:bg-yellow-950 p-6">
      <h2 id="skillsTitle" class="text-xl font-semibold text-yellow-400 mb-3"></h2>
      <ul id="skillsList" class="list-disc pl-6 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2"></ul>
    </section>

    <!-- Pre-Interview Q&A Button -->
    <div class="text-center">
      <a href="/pre-interview/index.html" class="btn">Pre-Interview Q&A</a>
    </div>

    <!-- Contact Info Card -->
    <section id="contactSection" class="glass bg-red-100 dark:bg-red-950 p-6 mb-12">
      <h2 id="contactTitle" class="text-xl font-semibold text-red-400 mb-3"></h2>
      <ul id="contactList" class="space-y-1 text-sm text-zinc-600 dark:text-zinc-400"></ul>
    </section>

  </main>
  <script>
  // Initialize Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBYYAjY8Q7RH0jQuMeOmAAp3XPTGLAQr0k",
    authDomain: "code-tools-pastebin.firebaseapp.com",
    projectId: "code-tools-pastebin",
    storageBucket: "code-tools-pastebin.appspot.com",
    messagingSenderId: "1000713658548",
    appId: "1:1000713658548:web:4996a3a58b1f3fd013b7e1"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Load Summary
  async function loadSummary() {
    try {
      const doc = await db.collection('resume').doc('summary').get();
      const data = doc.data();
      document.getElementById('summaryTitle').textContent = data.title;
      document.getElementById('summaryText').textContent = data.text;
    } catch (err) {
      console.error('Failed to load summary:', err);
      document.getElementById('summaryTitle').textContent = 'Error loading summary';
      document.getElementById('summaryText').textContent = 'Could not retrieve summary.';
    }
  }

  // Load Experience
  async function loadExperience() {
    try {
      const snapshot = await db.collection('resume').doc('experience').collection('jobs').orderBy('start', 'desc').get();
      const list = document.getElementById('experienceList');
      list.innerHTML = '';

      snapshot.forEach(doc => {
        const job = doc.data();

        const div = document.createElement('div');

        const title = document.createElement('h3');
        title.className = 'text-lg font-bold text-green-600 dark:text-green-300';
        title.textContent = job.title;

        const meta = document.createElement('p');
        meta.className = 'text-sm italic text-zinc-600 dark:text-zinc-400';
        meta.textContent = `${job.company}${job.location ? ' – ' + job.location : ''} | ${job.start} – ${job.end}`;

        const ul = document.createElement('ul');
        ul.className = 'list-disc pl-6 mt-2 space-y-1';
        (job.description || []).forEach(detail => {
          const li = document.createElement('li');
          li.textContent = detail;
          ul.appendChild(li);
        });

        div.appendChild(title);
        div.appendChild(meta);
        div.appendChild(ul);
        list.appendChild(div);
      });
    } catch (err) {
      console.error('Failed to load experience:', err);
      document.getElementById('experienceList').innerHTML = '<p class="text-red-600 dark:text-red-400">Could not load experience.</p>';
    }
  }

  // Load Education
  async function loadEducation() {
    try {
      const doc = await db.collection('resume').doc('education').get();
      const data = doc.data();
      document.getElementById('educationTitle').textContent = data.title;

      const ul = document.getElementById('educationList');
      ul.innerHTML = '';
      (data.schools || []).forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.institution} -- ${item.credential}${item.year ? ', ' + item.year : ''}`;
        ul.appendChild(li);
      });
    } catch (err) {
      console.error('Failed to load education:', err);
      document.getElementById('educationSection').innerHTML += '<p class="text-red-600 dark:text-red-400">Could not load education info.</p>';
    }
  }

  // Load Skills
  async function loadSkills() {
    try {
      const doc = await db.collection('resume').doc('skills').get();
      const data = doc.data();
      document.getElementById('skillsTitle').textContent = data.title;

      const ul = document.getElementById('skillsList');
      ul.innerHTML = '';
      (data.skills || []).forEach(skill => {
        const li = document.createElement('li');
        li.textContent = skill;
        ul.appendChild(li);
      });
    } catch (err) {
      console.error('Failed to load skills:', err);
      document.getElementById('skillsSection').innerHTML += '<p class="text-red-600 dark:text-red-400">Could not load skills list.</p>';
    }
  }

  // Load Contact
  async function loadContact() {
    try {
      const doc = await db.collection('resume').doc('contact').get();
      const data = doc.data();
      document.getElementById('contactTitle').textContent = data.title;

      const ul = document.getElementById('contactList');
      ul.innerHTML = '';
      (data.items || []).forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `${item.type}: <a href="${item.href}" class="text-cyan-600 dark:text-cyan-400 hover:underline"${item.href.startsWith('http') ? ' target="_blank"' : ''}>${item.text}</a>`;
        ul.appendChild(li);
      });
    } catch (err) {
      console.error('Failed to load contact:', err);
      document.getElementById('contactSection').innerHTML += '<p class="text-red-600 dark:text-red-400">Could not load contact info.</p>';
    }
  }

  // Load Everything on Page Ready
  document.addEventListener('DOMContentLoaded', () => {
    loadSummary();
    loadExperience();
    loadEducation();
    loadSkills();
    loadContact();
  });
</script>

</body>
</html> 